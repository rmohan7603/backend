# Find duplicates in usage_data
find_duplicates=select user_id, epoch from usage_data where user_id = ? and epoch = ?

# Bulk insert into usage_data
bulk_insert=insert into usage_data (user_id, usage_value, epoch) values (?, ?, ?)

# Bulk update usage_data
bulk_update=update usage_data set usage_value = ? where user_id = ? and epoch = ?

# Get password by username
getPasswordByUsername=select password from admin where username = ?

# Get admin ID by username
getAdminIdByUsername=select admin_id from admin where username = ?

# Record an upload in upload_metadata
recordUpload=insert into upload_metadata (admin_id, file_name, records_inserted, records_updated, records_discarded, status) values (?, ?, ?, ?, ?, ?)

# Get chart data grouped by date
#getChartDataBase=SELECT DATE(FROM_UNIXTIME(epoch)) AS usage_date, SUM(usage_value) AS total_usage FROM usage_data WHERE epoch >= ? AND epoch <= ?

# Group by date for daily aggregation
#getChartDataGroupBy=GROUP BY usage_date ORDER BY usage_date

# Base query for fetching chart data
getChartDataBase=SELECT {label_query} AS label, user_id, SUM(usage_value) AS total_usage FROM usage_data WHERE epoch >= ? AND epoch <= ?

# New queries added for creating tables

# Create table: admin
create_table_admin=create table if not exists `admin` (\
  `admin_id` int not null auto_increment, \
  `username` varchar(50) not null, \
  `password` varchar(255) not null, \
  `email` VARCHAR(100) default null, \
  `created_at` timestamp null default current_timestamp, \
  primary key (`admin_id`), \
  unique key `username` (`username`), \
  unique key `email` (`email`)\
);

# Create table: upload_metadata
create_table_upload_metadata=create table if not exists `upload_metadata` (\
  `upload_id` int not null auto_increment, \
  `admin_id` int default null, \
  `upload_date` timestamp null default current_timestamp, \
  `file_name` varchar(255) default null, \
  `records_inserted` int default null, \
  `records_updated` int default null, \
  `records_discarded` int default null, \
  `status` varchar(50) default 'PENDING', \
  primary key (`upload_id`), \
  key `admin_id` (`admin_id`), \
  constraint `upload_metadata_ibfk_1` foreign key (`admin_id`) references `admin` (`admin_id`) on delete set null\
);

# Create table: usage_data
create_table_usage_data=create table if not exists `usage_data` (\
  `id` int not null auto_increment primary key,\
  `user_id` varchar(15) default null,\
  `usage_value` int default null,\
  `epoch` bigint default null,\
  unique(`user_id`, `epoch`)\
);